(function(t){function e(e){for(var r,n,o=e[0],u=e[1],l=e[2],d=0,m=[];d<o.length;d++)n=o[d],i[n]&&m.push(i[n][0]),i[n]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);c&&c(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var u=a[o];0!==i[u]&&(r=!1)}r&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},i={app:0},s=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0311":function(t,e,a){},"034f":function(t,e,a){"use strict";var r=a("64a9"),i=a.n(r);i.a},1:function(t,e){},1391:function(t,e,a){},"197a":function(t,e,a){"use strict";var r=a("7fea"),i=a.n(r);i.a},"52ba":function(t,e,a){"use strict";var r=a("0311"),i=a.n(r);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("7f7f"),a("3b2b"),a("a481"),a("cadf"),a("551c"),a("097d");var r=a("2b0e"),i=a("8c4f"),s=a("30f4"),n=(a("d6f6"),a("28dd")),o=a("e082"),u=a("2b27"),l=a.n(u),c=a("313e"),d=a.n(c),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},h=[],f={name:"app",components:{}},p=f,y=(a("034f"),a("2877")),v=Object(y["a"])(p,m,h,!1,null,null,null);v.options.__file="App.vue";var g=v.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("mu-container",[r("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary"}},[r("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.showSelectDate()}},slot:"left"},[r("mu-icon",{attrs:{value:"access_time"}})],1),t._v("\n    时间卡片\n    "),r("mu-button",{attrs:{slot:"right",icon:""},on:{click:function(e){t.createTimeCard()}},slot:"right"},[r("mu-icon",{attrs:{value:"add"}})],1)],1),r("div",{staticStyle:{width:"100%",background:"#fff",padding:"18px"}},[r("router-link",{attrs:{slot:"avatar",to:"/analysis"},slot:"avatar"},[r("mu-card",{staticClass:"card-header"},[r("mu-card-header",{attrs:{title:t.today.date,"sub-title":t.today.slogan}},[r("router-link",{attrs:{slot:"avatar",to:"/sign-in"},slot:"avatar"},[r("mu-avatar",[r("img",{attrs:{src:a("915e")}})])],1)],1),r("mu-paper",{staticClass:"demo-paper card-header-panel",attrs:{"z-depth":0,circle:!0}},[t._v("\n          "+t._s(t.today.minutesSum||0)+" min\n        ")])],1)],1),t._l(t.timeCards,function(e,a){return r("mu-card",{key:a,staticClass:"time-card"},[r("mu-icon",{staticClass:"delete-time-card",attrs:{value:"clear"},on:{click:function(e){t.deleteTimeCard(a)}}}),r("mu-card-text",[r("mu-form",{staticClass:"mu-demo-form",attrs:{model:e}},[r("mu-form-item",{attrs:{prop:"activity"}},[r("mu-text-field",{attrs:{placeholder:"请输入活动名称，如‘学习英语’"},on:{change:function(e){t.updateCardActivity(a)}},model:{value:e.activity,callback:function(a){t.$set(e,"activity",a)},expression:"timeCard.activity"}})],1),t._l(e.timeSpans,function(e,i){return r("mu-flex",{key:i,staticClass:"flex-wrapper",attrs:{"align-items":"center"}},[r("mu-flex",{staticClass:"flex-demo",attrs:{"justify-content":"center",fill:""}},[r("mu-date-input",{attrs:{placeholder:"开始时间",type:"time","view-type":"list","clock-type":"24hr"},on:{change:function(e){t.onDatePickerChange(a,i,0)}},model:{value:e.startTime,callback:function(a){t.$set(e,"startTime",a)},expression:"timeSpan.startTime"}})],1),r("mu-flex",{staticClass:"flex-demo",attrs:{"justify-content":"center",fill:""}},[r("mu-date-input",{attrs:{placeholder:"结束时间",type:"time","view-type":"list","clock-type":"24hr"},on:{change:function(e){t.onDatePickerChange(a,i,1)}},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"timeSpan.endTime"}})],1)],1)}),r("mu-flex",{staticClass:"time-card-sum"},[t._v("\n            小计： "+t._s(e.timeCardSum||0)+" min\n          ")]),r("mu-button",{attrs:{"full-width":"",color:"primary"},on:{click:function(e){t.createTimeSpan(a)}}},[r("mu-icon",{attrs:{value:"add",left:""}}),t._v("\n            添加时间段\n          ")],1)],2)],1)],1)})],2),t.showDateSelecter?r("mu-container",{staticClass:"date-selector-mask"}):t._e(),t.showDateSelecter?r("mu-container",[r("mu-flex",{staticClass:"date-selector",attrs:{"justify-content":"center","align-items":"center"}},[r("mu-paper",{attrs:{"z-depth":1}},[r("mu-date-picker",{attrs:{date:t.date,change:t.onDateChange(t.date)},on:{"update:date":function(e){t.date=e}}})],1),r("mu-button",{staticClass:"date-selector-closer",attrs:{icon:""},on:{click:function(e){t.hideSelectDate()}}},[r("mu-icon",{attrs:{value:"highlight_off"}})],1)],1)],1):t._e()],1)},C=[],S=a("53ca"),w=(a("ac4d"),a("8a81"),a("ac6a"),{name:"Home",data:function(){return{today:{date:"这里是今天的日期",slogan:"这是我们相遇的第几天",minutesSum:0},timeCards:[],showDateSelecter:!1,date:void 0}},methods:{init:function(){if(!this.$cookies.get("id")||-1==this.$cookies.get("id")){var t=this.$cookies.get("tel"),e=this.$cookies.get("password");t&&e?this.login(t,e,"home"):this.$router.push({name:"sign-in"})}this.today.date=(new Date).format("yyyy-MM-dd"),this.getTodayTimeCard(),this.getUserLoginTimes()},getUserLoginTimes:function(){var t=this;this.$http.get(this.BASE_API+"/get-user-login-times?user_id="+this.$cookies.get("id")).then(function(e){e.body.result&&(0==e.body.data.count?t.today.slogan="登录一下，开始一段故事":t.today.slogan="这是我们相遇的第"+e.body.data.count+"天")})},updateMinutesSum:function(){var t=0,e=!0,a=!1,r=void 0;try{for(var i,s=this.timeCards[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var n=i.value,o=0,u=!0,l=!1,c=void 0;try{for(var d,m=n.timeSpans[Symbol.iterator]();!(u=(d=m.next()).done);u=!0){var h=d.value;if(h.startTime&&h.endTime){var f=h.endTime-h.startTime,p=f/1e3/60;o+=Math.ceil(p),t+=p}}}catch(y){l=!0,c=y}finally{try{u||null==m.return||m.return()}finally{if(l)throw c}}n.timeCardSum=o}}catch(y){a=!0,r=y}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}this.today.minutesSum=Math.ceil(t)},showSelectDate:function(){this.showDateSelecter=!0},hideSelectDate:function(){this.showDateSelecter=!1},onDateChange:function(t){var e=this;if(void 0!=t){var a=this.date.getDate(),r=this.date.getMonth()+1,i=this.date.getFullYear(),s=i+"-"+r+"-"+a;this.$http.get(this.BASE_API+"/get-time-card-by-date?user_id="+this.$cookies.get("id")+"&date="+s).then(function(t){t.body.result?(e.timeCards=t.body.data,e.updateMinutesSum(),e.showDateSelecter=!1,e.date=void 0):e.$toast.warning(t.body.message)})}},createTimeCard:function(){var t=this;this.$http.get(this.BASE_API+"/create-time-card?user_id="+this.$cookies.get("id")).then(function(e){e.body.result?(t.getTodayTimeCard(),t.$toast.success(e.body.message)):t.$toast.error(e.body.message)})},createTimeSpan:function(t){this.timeCards[t].timeSpans.push({id:-1,startTime:0,endTime:0})},getTodayTimeCard:function(){var t=this;this.$http.get(this.BASE_API+"/get-today-time-card?user_id="+this.$cookies.get("id")).then(function(e){e.body.result&&(t.timeCards=e.body.data,t.updateMinutesSum())})},onDatePickerChange:function(t,e,a){var r=this,i=this.timeCards[t].timeSpans[e].startTime,s=this.timeCards[t].timeSpans[e].endTime,n=this.timeCards[t].id,o=this.timeCards[t].timeSpans[e].id;if("object"==Object(S["a"])(i)&&(i=i.getTime()),"object"==Object(S["a"])(s)&&(s=s.getTime()),s&&i&&parseInt((s-i)/1e3)<=0)return this.$toast.error("开始时间必须小于结束时间，请重新输入"),void(this.timeCards[t].timeSpans[e].endTime=0);if(-1==o){if(!i)return this.$toast.error("请先输入开始时间"),void(this.timeCards[t].timeSpans[e].endTime=0);this.$http.get(this.BASE_API+"/create-time-span?card_id="+n+"&start_time="+i).then(function(t){t.body.result?(r.getTodayTimeCard(),r.$toast.success(t.body.message)):r.$toast.error(t.body.message)})}else i&&0==a&&(s-i>=0?this.$http.get(this.BASE_API+"/update-time-span?card_id="+n+"&span_id="+o+"&start_time="+i).then(function(t){t.body.result?(r.getTodayTimeCard(),r.$toast.success(t.body.message)):r.$toast.error(t.body.message)}):(this.$toast.error("开始时间必须小于结束时间，请重新输入"),this.timeCards[t].timeSpans[e].startTime=0)),s&&1==a&&(s-i>=0?this.$http.get(this.BASE_API+"/update-time-span?card_id="+n+"&span_id="+o+"&end_time="+s).then(function(t){t.body.result?(r.getTodayTimeCard(),r.$toast.success(t.body.message)):r.$toast.error(t.body.message)}):(this.$toast.error("开始时间必须小于结束时间，请重新输入"),this.timeCards[t].timeSpans[e].endTime=0))},updateCardActivity:function(t){var e=this,a=this.timeCards[t].id,r=this.timeCards[t].activity.trim();r.length>0&&this.$http.get(this.BASE_API+"/update-card-activity?card_id="+a+"&activity="+r).then(function(t){t.body.result?e.$toast.success(t.body.message):e.$toast.error(t.body.message)})},deleteTimeCard:function(t){var e=this,a=this.timeCards[t].id;this.$http.get(this.BASE_API+"/delete-time-card?card_id="+a).then(function(t){t.body.result?(e.timeCards.length>1?e.getTodayTimeCard():(e.timeCards=[],e.today.minutesSum=0),e.$toast.success(t.body.message)):e.$toast.error(t.body.message)})}},mounted:function(){this.init()}}),_=w,$=(a("9d09"),Object(y["a"])(_,b,C,!1,null,"725a0eba",null));$.options.__file="Home.vue";var A=$.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("mu-container",[r("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary",title:"注册用户"}},[r("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.back()}},slot:"left"},[r("mu-icon",{attrs:{value:"chevron_left"}})],1),r("router-link",{staticStyle:{color:"#fff",height:"inherit"},attrs:{slot:"right",to:"/sign-in"},slot:"right"},[r("mu-button",{attrs:{flat:""}},[t._v("登录")])],1)],1),r("mu-container",[r("mu-card",{staticStyle:{width:"100%",margin:"18px auto"}},[r("mu-card-header",[r("mu-avatar",{attrs:{slot:"avatar",size:"100"},slot:"avatar"},[r("img",{attrs:{src:a("915e")}})])],1),r("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.user,"label-position":"left"}},[r("mu-form-item",{attrs:{label:"手机号码","help-text":"请输入11位手机号码",prop:"tel",rules:t.telRules}},[r("mu-text-field",{attrs:{prop:"tel"},model:{value:t.user.tel,callback:function(e){t.$set(t.user,"tel",e)},expression:"user.tel"}})],1),r("mu-form-item",{attrs:{label:"登录密码",prop:"psw",rules:t.pswRules}},[r("mu-text-field",{attrs:{type:"password",prop:"psw"},model:{value:t.user.psw,callback:function(e){t.$set(t.user,"psw",e)},expression:"user.psw"}})],1),r("mu-form-item",{attrs:{label:"确认密码",prop:"pswConfirm",rules:t.pswConfirmRules}},[r("mu-text-field",{attrs:{type:"password",prop:"pswConfirm"},model:{value:t.user.pswConfirm,callback:function(e){t.$set(t.user,"pswConfirm",e)},expression:"user.pswConfirm"}})],1),r("mu-form-item",{attrs:{prop:"isAgree",rules:t.argeeRules}},[r("mu-checkbox",{attrs:{label:"同意用户协议"},model:{value:t.user.isAgree,callback:function(e){t.$set(t.user,"isAgree",e)},expression:"user.isAgree"}})],1)],1)],1)],1),r("mu-button",{attrs:{"full-width":"",color:"primary"},on:{click:function(e){t.signUp()}}},[t._v("\n    注册\n  ")])],1)},k=[],T=0;function D(t){return M(B(E(t)))}function B(t){return I(j(P(t),8*t.length))}function M(t){for(var e,a=T?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<t.length;i++)e=t.charCodeAt(i),r+=a.charAt(e>>>4&15)+a.charAt(15&e);return r}function E(t){var e,a,r="",i=-1;while(++i<t.length)e=t.charCodeAt(i),a=i+1<t.length?t.charCodeAt(i+1):0,55296<=e&&e<=56319&&56320<=a&&a<=57343&&(e=65536+((1023&e)<<10)+(1023&a),i++),e<=127?r+=String.fromCharCode(e):e<=2047?r+=String.fromCharCode(192|e>>>6&31,128|63&e):e<=65535?r+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):e<=2097151&&(r+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return r}function P(t){for(var e=Array(t.length>>2),a=0;a<e.length;a++)e[a]=0;for(a=0;a<8*t.length;a+=8)e[a>>5]|=(255&t.charCodeAt(a/8))<<a%32;return e}function I(t){for(var e="",a=0;a<32*t.length;a+=8)e+=String.fromCharCode(t[a>>5]>>>a%32&255);return e}function j(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var a=1732584193,r=-271733879,i=-1732584194,s=271733878,n=0;n<t.length;n+=16){var o=a,u=r,l=i,c=s;a=R(a,r,i,s,t[n+0],7,-680876936),s=R(s,a,r,i,t[n+1],12,-389564586),i=R(i,s,a,r,t[n+2],17,606105819),r=R(r,i,s,a,t[n+3],22,-1044525330),a=R(a,r,i,s,t[n+4],7,-176418897),s=R(s,a,r,i,t[n+5],12,1200080426),i=R(i,s,a,r,t[n+6],17,-1473231341),r=R(r,i,s,a,t[n+7],22,-45705983),a=R(a,r,i,s,t[n+8],7,1770035416),s=R(s,a,r,i,t[n+9],12,-1958414417),i=R(i,s,a,r,t[n+10],17,-42063),r=R(r,i,s,a,t[n+11],22,-1990404162),a=R(a,r,i,s,t[n+12],7,1804603682),s=R(s,a,r,i,t[n+13],12,-40341101),i=R(i,s,a,r,t[n+14],17,-1502002290),r=R(r,i,s,a,t[n+15],22,1236535329),a=U(a,r,i,s,t[n+1],5,-165796510),s=U(s,a,r,i,t[n+6],9,-1069501632),i=U(i,s,a,r,t[n+11],14,643717713),r=U(r,i,s,a,t[n+0],20,-373897302),a=U(a,r,i,s,t[n+5],5,-701558691),s=U(s,a,r,i,t[n+10],9,38016083),i=U(i,s,a,r,t[n+15],14,-660478335),r=U(r,i,s,a,t[n+4],20,-405537848),a=U(a,r,i,s,t[n+9],5,568446438),s=U(s,a,r,i,t[n+14],9,-1019803690),i=U(i,s,a,r,t[n+3],14,-187363961),r=U(r,i,s,a,t[n+8],20,1163531501),a=U(a,r,i,s,t[n+13],5,-1444681467),s=U(s,a,r,i,t[n+2],9,-51403784),i=U(i,s,a,r,t[n+7],14,1735328473),r=U(r,i,s,a,t[n+12],20,-1926607734),a=z(a,r,i,s,t[n+5],4,-378558),s=z(s,a,r,i,t[n+8],11,-2022574463),i=z(i,s,a,r,t[n+11],16,1839030562),r=z(r,i,s,a,t[n+14],23,-35309556),a=z(a,r,i,s,t[n+1],4,-1530992060),s=z(s,a,r,i,t[n+4],11,1272893353),i=z(i,s,a,r,t[n+7],16,-155497632),r=z(r,i,s,a,t[n+10],23,-1094730640),a=z(a,r,i,s,t[n+13],4,681279174),s=z(s,a,r,i,t[n+0],11,-358537222),i=z(i,s,a,r,t[n+3],16,-722521979),r=z(r,i,s,a,t[n+6],23,76029189),a=z(a,r,i,s,t[n+9],4,-640364487),s=z(s,a,r,i,t[n+12],11,-421815835),i=z(i,s,a,r,t[n+15],16,530742520),r=z(r,i,s,a,t[n+2],23,-995338651),a=L(a,r,i,s,t[n+0],6,-198630844),s=L(s,a,r,i,t[n+7],10,1126891415),i=L(i,s,a,r,t[n+14],15,-1416354905),r=L(r,i,s,a,t[n+5],21,-57434055),a=L(a,r,i,s,t[n+12],6,1700485571),s=L(s,a,r,i,t[n+3],10,-1894986606),i=L(i,s,a,r,t[n+10],15,-1051523),r=L(r,i,s,a,t[n+1],21,-2054922799),a=L(a,r,i,s,t[n+8],6,1873313359),s=L(s,a,r,i,t[n+15],10,-30611744),i=L(i,s,a,r,t[n+6],15,-1560198380),r=L(r,i,s,a,t[n+13],21,1309151649),a=L(a,r,i,s,t[n+4],6,-145523070),s=L(s,a,r,i,t[n+11],10,-1120210379),i=L(i,s,a,r,t[n+2],15,718787259),r=L(r,i,s,a,t[n+9],21,-343485551),a=F(a,o),r=F(r,u),i=F(i,l),s=F(s,c)}return Array(a,r,i,s)}function O(t,e,a,r,i,s){return F(H(F(F(e,t),F(r,s)),i),a)}function R(t,e,a,r,i,s,n){return O(e&a|~e&r,t,e,i,s,n)}function U(t,e,a,r,i,s,n){return O(e&r|a&~r,t,e,i,s,n)}function z(t,e,a,r,i,s,n){return O(e^a^r,t,e,i,s,n)}function L(t,e,a,r,i,s,n){return O(a^(e|~r),t,e,i,s,n)}function F(t,e){var a=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(a>>16);return r<<16|65535&a}function H(t,e){return t<<e|t>>>32-e}var J={name:"SignUp",data:function(){var t=this;return{telRules:[{validate:function(t){return!!t},message:"必须填写手机号码"},{validate:function(t){return 11==t.length},message:"请填写11位手机号码"}],pswRules:[{validate:function(t){return!!t},message:"必须填写密码"},{validate:function(t){return t.length>=8&&t.length<=16},message:"密码长度必须大于8小于16"}],pswConfirmRules:[{validate:function(t){return!!t},message:"必须填写确认密码"},{validate:function(e){return e==t.user.psw},message:"两次填写的密码不一致"}],argeeRules:[{validate:function(t){return!!t},message:"必须同意用户协议"}],user:{tel:"",psw:"",pswConfirm:"",isAgree:!1}}},methods:{signUp:function(){var t=this;this.$refs.form.validate().then(function(e){e&&t.$http.get(t.BASE_API+"/sign-up?tel="+t.user.tel+"&psw="+D(t.user.psw)).then(function(e){e.body.result?(t.$toast.success(e.body.message),t.$router.push({name:"sign-in"})):t.$toast.error(e.body.message)})})}}},Y=J,q=(a("52ba"),Object(y["a"])(Y,x,k,!1,null,"116d2aaf",null));q.options.__file="SignUp.vue";var W=q.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("mu-container",[r("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary",title:"登录"}},[r("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.back()}},slot:"left"},[r("mu-icon",{attrs:{value:"chevron_left"}})],1),r("router-link",{staticStyle:{color:"#fff",height:"inherit"},attrs:{slot:"right",to:"/sign-up"},slot:"right"},[r("mu-button",{attrs:{flat:""}},[t._v("注册")])],1)],1),r("mu-container",[r("mu-card",{staticStyle:{width:"100%",margin:"18px auto"}},[r("mu-card-header",[r("mu-avatar",{attrs:{slot:"avatar",size:"100"},slot:"avatar"},[r("img",{attrs:{src:a("915e")}})])],1),r("mu-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.user,"label-position":"left"}},[r("mu-form-item",{attrs:{label:"手机号码",prop:"tel",rules:t.telRules}},[r("mu-text-field",{attrs:{prop:"tel"},model:{value:t.user.tel,callback:function(e){t.$set(t.user,"tel",e)},expression:"user.tel"}})],1),r("mu-form-item",{attrs:{label:"登录密码",prop:"psw",rules:t.pswRules}},[r("mu-text-field",{attrs:{type:"password",prop:"psw"},model:{value:t.user.psw,callback:function(e){t.$set(t.user,"psw",e)},expression:"user.psw"}})],1)],1)],1)],1),r("mu-button",{attrs:{"full-width":"",color:"primary"},on:{click:function(e){t.signIn()}}},[t._v("\n    登录\n  ")])],1)},K=[],N={name:"SignIn",data:function(){return{telRules:[{validate:function(t){return!!t},message:"必须填写手机号码"},{validate:function(t){return 11==t.length},message:"请填写11位手机号码"}],pswRules:[{validate:function(t){return!!t},message:"必须填写密码"},{validate:function(t){return t.length>=8&&t.length<=16},message:"密码长度必须大于8小于16"}],user:{tel:"",psw:""}}},methods:{signIn:function(){var t=this;this.$refs.form.validate().then(function(e){if(e){var a=D(t.user.psw);t.login(t.user.tel,a,"home")}})}}},Q=N,V=(a("e6bc"),Object(y["a"])(Q,G,K,!1,null,"0cc93c0f",null));V.options.__file="SignIn.vue";var X=V.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("mu-container",[a("mu-appbar",{staticStyle:{width:"100%"},attrs:{color:"primary",title:"数据分析"}},[a("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.back()}},slot:"left"},[a("mu-icon",{attrs:{value:"chevron_left"}})],1),a("router-link",{staticStyle:{color:"#fff",height:"inherit"},attrs:{slot:"right",to:"/sign-in"},slot:"right"},[a("mu-button",{attrs:{flat:""}},[t._v("筛选")])],1)],1),a("mu-container",[a("mu-card",{staticClass:"abstract"},[a("mu-card-title",{attrs:{title:t.abstract.title,"sub-title":t.abstract.subTitle}}),a("div",{staticClass:"abstract-item"},[a("p",[t._v(t._s(t.abstract.numActivity))]),t._v("工作数")]),a("div",{staticClass:"abstract-item"},[a("p",[t._v(t._s(t.abstract.sumMinutes))]),t._v("时长(min)")])],1),a("div",{staticClass:"charts"},[a("h2",{staticClass:"chart-title-proportion"},[t._v("7日内工作占比")]),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"proportion"}})]),a("div",{staticClass:"charts"},[a("h2",{staticClass:"chart-title-trendency"},[t._v("7日内每日走势")]),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"trendency"}})])],1)],1)},tt=[],et=(a("28a5"),{name:"Analysis",data:function(){return{type:1,abstract:{type:1,title:"数据总览",subTitle:"今日数据",numActivity:0,sumMinutes:0},timeCardSumsByActivity:[],timeCardSumsByDate:[],minutesSum:0}},methods:{getData:function(){var t=this;this.$http.get(this.BASE_API+"/get-analysis-data?type="+this.abstract.type).then(function(e){e.body.result?(t.calcMinutesSum(e.body.data),t.initTrendencyChart(),t.initProportionChart()):t.$toast.error(e.body.message)})},calcMinutesSum:function(t){var e=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var n=i.value,o=0,u=!0,l=!1,c=void 0;try{for(var d,m=n.timeSpans[Symbol.iterator]();!(u=(d=m.next()).done);u=!0){var h=d.value;if(h.startTime&&h.endTime){var f=h.endTime-h.startTime,p=f/1e3/60;o+=Math.ceil(p)}}}catch(z){l=!0,c=z}finally{try{u||null==m.return||m.return()}finally{if(l)throw c}}if(n.timeCardSum=o,this.abstract.sumMinutes+=o,0==this.timeCardSumsByActivity.length)this.timeCardSumsByActivity.push(n);else{var y=!1,v=!0,g=!1,b=void 0;try{for(var C,S=this.timeCardSumsByActivity[Symbol.iterator]();!(v=(C=S.next()).done);v=!0){var w=C.value;w.activity==n.activity&&(y=!0,w.timeCardSum+=n.timeCardSum)}}catch(z){g=!0,b=z}finally{try{v||null==S.return||S.return()}finally{if(g)throw b}}y||this.timeCardSumsByActivity.push(n)}this.abstract.numActivity=this.timeCardSumsByActivity.length;var _=0;if(n.todaySum=_,0==this.timeCardSumsByDate.length){var $=new Date(n.createdAt),A={date:$.getMonth()+1+"-"+$.getDate(),minutes:n.timeCardSum};this.timeCardSumsByDate.push(A)}else{var x=!1,k=!0,T=!1,D=void 0;try{for(var B,M=this.timeCardSumsByDate[Symbol.iterator]();!(k=(B=M.next()).done);k=!0){var E=B.value,P=E.date.split("-"),I=P[0],j=P[1],O=new Date(n.createdAt);parseInt(I)-1==O.getMonth()&&parseInt(j)==O.getDate()&&(x=!0,E.minutes+=n.timeCardSum)}}catch(z){T=!0,D=z}finally{try{k||null==M.return||M.return()}finally{if(T)throw D}}if(!x){var R=new Date(n.createdAt),U={date:R.getMonth()+1+"-"+R.getDate(),minutes:n.timeCardSum};this.timeCardSumsByDate.push(U)}}}}catch(z){a=!0,r=z}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}},initTrendencyChart:function(){var t=[],e=[],a=!0,r=!1,i=void 0;try{for(var s,n=this.timeCardSumsByDate[Symbol.iterator]();!(a=(s=n.next()).done);a=!0){var o=s.value;t.push(o.date),e.push(o.minutes)}}catch(c){r=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(r)throw i}}var u=this.echarts.init(document.getElementById("trendency")),l={xAxis:{type:"category",data:t},yAxis:{type:"value"},series:[{data:e,type:"line"}]};u.setOption(l)},initProportionChart:function(){var t=[],e=[],a=[],r=!0,i=!1,s=void 0;try{for(var n,o=this.timeCardSumsByActivity[Symbol.iterator]();!(r=(n=o.next()).done);r=!0){var u=n.value;t.push(u.activity),e.push(u.createdAt),a.push({value:u.timeCardSum,name:u.activity})}}catch(d){i=!0,s=d}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}var l=this.echarts.init(document.getElementById("proportion")),c={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",x:"left",data:t},series:[{name:"时间卡片（分钟）",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:a}]};l.setOption(c)}},mounted:function(){this.getData()}}),at=et,rt=(a("197a"),Object(y["a"])(at,Z,tt,!1,null,"1640c602",null));rt.options.__file="Analysis.vue";var it=rt.exports;r["a"].use(i["a"]),r["a"].use(s["a"]),r["a"].use(n["a"]),r["a"].use(o["a"]),r["a"].use(l.a),r["a"].use(d.a),r["a"].config.productionTip=!1,r["a"].prototype.BASE_API="https://time.beanyon.site",r["a"].prototype.back=function(){history.back()},r["a"].prototype.echarts=d.a;var st=[{path:"/home",name:"home",component:A},{path:"/sign-up",name:"sign-up",component:W},{path:"/sign-in",name:"sign-in",component:X},{path:"/analysis",name:"analysis",component:it},{path:"/",redirect:"/home"}],nt=new i["a"]({mode:"history",routes:st});Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},r["a"].prototype.login=function(t,e,a){var r=this;this.$http.get(this.BASE_API+"/sign-in?tel="+t+"&psw="+e).then(function(t){if(t.body.result){var i=1296e3;r.$cookies.set("tel",t.body.data.tel,i),r.$cookies.set("password",e,i),r.$cookies.set("id",t.body.data.id,i),r.$cookies.set("name",t.body.data.name,i),r.$cookies.set("gender",t.body.data.gender,i),r.$cookies.set("age",t.body.data.age,i),r.$cookies.set("createdAt",t.body.data.createdAt,i),r.$toast.success(t.body.message),r.$router.push({name:a})}else r.$toast.error(t.body.message)})},new r["a"]({router:nt,render:function(t){return t(g)}}).$mount("#app")},"64a9":function(t,e,a){},"7fea":function(t,e,a){},"915e":function(t,e,a){t.exports=a.p+"img/avatar.469c5731.jpg"},"9d09":function(t,e,a){"use strict";var r=a("fe69"),i=a.n(r);i.a},e6bc:function(t,e,a){"use strict";var r=a("1391"),i=a.n(r);i.a},fe69:function(t,e,a){}});
//# sourceMappingURL=app.0890ba9b.js.map